{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function App(){const[products,setProducts]=useState([]);const[results,setResults]=useState([]);const[query,setQuery]=useState(\"\");const[category,setCategory]=useState(\"All\");const[maxPrice,setMaxPrice]=useState(\"\");const[loading,setLoading]=useState(false);const[error,setError]=useState(\"\");useEffect(()=>{setLoading(true);fetch(\"/api/products\").then(r=>r.json()).then(data=>{setProducts(data);setResults(data);}).catch(()=>setError(\"Failed to load products.\")).finally(()=>setLoading(false));},[]);const categories=[\"All\",...Array.from(new Set(products.map(p=>p.category)))];function applyFilter(){setError(\"\");const filtered=products.filter(p=>(category===\"All\"||p.category===category)&&(maxPrice===\"\"||p.price<=parseFloat(maxPrice)));setResults(filtered);if(filtered.length===0)setError(\"No products match the filter criteria.\");}async function aiSearch(e){e&&e.preventDefault();if(!query.trim()){setError(\"Please enter a search term\");return;}setError(\"\");setLoading(true);try{const resp=await fetch(\"/api/search\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({query})});const json=await resp.json();if(json.ids&&json.ids.length>0){setResults(products.filter(p=>json.ids.includes(p.id)));}else{setResults([]);setError(\"No products found matching your AI search.\");}}catch(_unused){setError(\"AI search failed. Please try again.\");}finally{setLoading(false);}}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"AI Product Catalog\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:aiSearch,className:\"row\",\"aria-label\":\"AI search form\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input\",placeholder:\"Try: \\\"comfortable running shoes under $100\\\" or \\\"best rated headphones\\\"\",value:query,onChange:e=>setQuery(e.target.value),disabled:loading,\"aria-label\":\"AI search input\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading||!query.trim(),children:loading?/*#__PURE__*/_jsx(\"span\",{className:\"loading-text\",children:\"Searching...\"}):/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"icon-search\"}),\" AI Search\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filters\",\"aria-label\":\"Filters section\",children:[/*#__PURE__*/_jsx(\"select\",{value:category,onChange:e=>setCategory(e.target.value),\"aria-label\":\"Filter by category\",disabled:loading,children:categories.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c,children:c},c))}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",step:\"0.01\",placeholder:\"Max price ($)\",value:maxPrice,onChange:e=>setMaxPrice(e.target.value),\"aria-label\":\"Max price filter\",disabled:loading}),/*#__PURE__*/_jsx(\"button\",{onClick:applyFilter,disabled:loading,type:\"button\",children:\"Apply Filters\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",role:\"alert\",children:error}),loading&&results.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading products...\"}):results.length===0&&!error?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"No products found\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Try adjusting your search or filters\"})]}):/*#__PURE__*/_jsx(\"ul\",{className:\"products\",children:results.map(p=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"b\",{children:p.name}),/*#__PURE__*/_jsxs(\"span\",{className:\"price\",children:[\"$\",p.price.toFixed(2)]}),/*#__PURE__*/_jsx(\"i\",{children:p.category}),/*#__PURE__*/_jsx(\"div\",{children:p.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"rating\",children:[\"Rating: \",p.rating,\" \\u2605\"]})]},p.id))})]});}","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","App","products","setProducts","results","setResults","query","setQuery","category","setCategory","maxPrice","setMaxPrice","loading","setLoading","error","setError","fetch","then","r","json","data","catch","finally","categories","Array","from","Set","map","p","applyFilter","filtered","filter","price","parseFloat","length","aiSearch","e","preventDefault","trim","resp","method","headers","body","JSON","stringify","ids","includes","id","_unused","className","children","onSubmit","placeholder","value","onChange","target","disabled","type","c","min","step","onClick","role","name","toFixed","description","rating"],"sources":["/Users/suresh.allamsetti/ai-catalog/ai-catalog/src/main/frontend/src/App.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nexport default function App() {\n  const [products, setProducts] = useState([]);\n  const [results, setResults] = useState([]);\n  const [query, setQuery] = useState(\"\");\n  const [category, setCategory] = useState(\"All\");\n  const [maxPrice, setMaxPrice] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  useEffect(() => {\n    setLoading(true);\n    fetch(\"/api/products\")\n      .then((r) => r.json())\n      .then((data) => {\n        setProducts(data);\n        setResults(data);\n      })\n      .catch(() => setError(\"Failed to load products.\"))\n      .finally(() => setLoading(false));\n  }, []);\n\n  const categories = [\"All\", ...Array.from(new Set(products.map((p) => p.category)))];\n\n  function applyFilter() {\n    setError(\"\");\n    const filtered = products.filter(\n      (p) =>\n        (category === \"All\" || p.category === category) &&\n        (maxPrice === \"\" || p.price <= parseFloat(maxPrice))\n    );\n    setResults(filtered);\n    if (filtered.length === 0) setError(\"No products match the filter criteria.\");\n  }\n\n  async function aiSearch(e) {\n    e && e.preventDefault();\n    if (!query.trim()) {\n      setError(\"Please enter a search term\");\n      return;\n    }\n\n    setError(\"\");\n    setLoading(true);\n    try {\n      const resp = await fetch(\"/api/search\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ query }),\n      });\n      const json = await resp.json();\n      if (json.ids && json.ids.length > 0) {\n        setResults(products.filter((p) => json.ids.includes(p.id)));\n      } else {\n        setResults([]);\n        setError(\"No products found matching your AI search.\");\n      }\n    } catch {\n      setError(\"AI search failed. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <div className=\"container\">\n      <h1>AI Product Catalog</h1>\n\n      <form onSubmit={aiSearch} className=\"row\" aria-label=\"AI search form\">\n        <input\n          className=\"input\"\n          placeholder='Try: \"comfortable running shoes under $100\" or \"best rated headphones\"'\n          value={query}\n          onChange={(e) => setQuery(e.target.value)}\n          disabled={loading}\n          aria-label=\"AI search input\"\n        />\n        <button type=\"submit\" disabled={loading || !query.trim()}>\n          {loading ? (\n            <span className=\"loading-text\">Searching...</span>\n          ) : (\n            <span>\n              <i className=\"icon-search\"></i> AI Search\n            </span>\n          )}\n        </button>\n      </form>\n\n      <div className=\"filters\" aria-label=\"Filters section\">\n        <select\n          value={category}\n          onChange={(e) => setCategory(e.target.value)}\n          aria-label=\"Filter by category\"\n          disabled={loading}\n        >\n          {categories.map((c) => (\n            <option key={c} value={c}>\n              {c}\n            </option>\n          ))}\n        </select>\n\n        <input\n          type=\"number\"\n          min=\"0\"\n          step=\"0.01\"\n          placeholder=\"Max price ($)\"\n          value={maxPrice}\n          onChange={(e) => setMaxPrice(e.target.value)}\n          aria-label=\"Max price filter\"\n          disabled={loading}\n        />\n\n        <button onClick={applyFilter} disabled={loading} type=\"button\">\n          Apply Filters\n        </button>\n      </div>\n\n      {error && <p className=\"error-message\" role=\"alert\">{error}</p>}\n\n      {loading && results.length === 0 ? (\n        <div className=\"loading\">Loading products...</div>\n      ) : results.length === 0 && !error ? (\n        <div className=\"empty-state\">\n          <h3>No products found</h3>\n          <p>Try adjusting your search or filters</p>\n        </div>\n      ) : (\n        <ul className=\"products\">\n          {results.map((p) => (\n            <li key={p.id}>\n              <b>{p.name}</b>\n              <span className=\"price\">${p.price.toFixed(2)}</span>\n              <i>{p.category}</i>\n              <div>{p.description}</div>\n              <div className=\"rating\">Rating: {p.rating} â˜…</div>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}